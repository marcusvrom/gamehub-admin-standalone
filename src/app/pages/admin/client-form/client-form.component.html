<h1 class="mb-4">{{ pageTitle }}</h1>

<form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
  <div class="card mb-4">
    <div class="card-header">Seção 1: Dados do Jogador</div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Nome Completo</label
          ><input type="text" formControlName="name" class="form-control" />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Data de Nascimento</label
          ><input
            type="date"
            formControlName="birth_date"
            class="form-control"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">CPF</label>
          <input
            type="text"
            formControlName="cpf"
            class="form-control"
            mask="000.000.000-00"
            placeholder="000.000.000-00"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Telefone</label
          ><input type="text" formControlName="phone" class="form-control" />
        </div>
        <div class="col-md-12 mb-3">
          <label class="form-label">Email</label
          ><input type="email" formControlName="email" class="form-control" />
        </div>
        <div class="col-md-12 mb-3">
          <label class="form-label">Endereço</label
          ><input type="text" formControlName="address" class="form-control" />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Bairro</label
          ><input
            type="text"
            formControlName="neighborhood"
            class="form-control"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Cidade</label
          ><input type="text" formControlName="city" class="form-control" />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Tipo de Cliente</label>
          <select formControlName="client_type" class="form-select">
            <option value="AVULSO">Avulso / Pacote de Horas</option>
            <option value="CLUBE">Membro do Clube</option>
          </select>
        </div>
        <div
          *ngIf="clientForm.get('client_type')?.value === 'CLUBE'"
          class="row"
        >
          <div class="col-md-4 mb-3">
            <label class="form-label">Status da Assinatura</label>
            <select formControlName="subscription_status" class="form-select">
              <option value="PAGA">Paga</option>
              <option value="PENDENTE">Pendente</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Data da Assinatura</label>
            <input
              type="date"
              formControlName="subscription_date"
              class="form-control"
            />
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Próxima Cobrança</label>
            <input
              type="date"
              formControlName="next_billing_date"
              class="form-control"
            />
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Saldo de Horas (Inicial)</label
          ><input
            type="number"
            formControlName="hours_balance"
            class="form-control"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">Seção 2: Dados do Responsável (para menores)</div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Nome do Responsável</label
          ><input
            type="text"
            formControlName="guardian_name"
            class="form-control"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">CPF do Responsável</label>
          <input
            type="text"
            formControlName="guardian_cpf"
            class="form-control"
            mask="000.000.000-00"
            placeholder="000.000.000-00"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Telefone do Responsável</label
          ><input
            type="text"
            formControlName="guardian_phone"
            class="form-control"
          />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Parentesco</label
          ><input
            type="text"
            formControlName="guardian_relationship"
            class="form-control"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">Seção 3: Termos e Consentimento</div>
    <div class="card-body">
      <div class="form-check mb-2">
        <input
          type="checkbox"
          formControlName="agreed_to_terms"
          class="form-check-input"
          id="terms"
        />
        <label class="form-check-label" for="terms"
          >Li e concordo com os Termos de Uso e Serviço (Obrigatório)</label
        >
      </div>
      <div class="form-check">
        <input
          type="checkbox"
          formControlName="agreed_to_marketing"
          class="form-check-input"
          id="marketing"
        />
        <label class="form-check-label" for="marketing"
          >Autorizo o envio de comunicações e marketing</label
        >
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-end">
    <button
      type="button"
      class="btn btn-secondary me-2"
      routerLink="/admin/clients"
    >
      Cancelar
    </button>
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="clientForm.invalid"
    >
      {{ isEditMode ? "Atualizar" : "Salvar" }}
    </button>
  </div>
</form>
